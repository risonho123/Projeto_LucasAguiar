@page "/servico"

@using LucasAguiar.Configs
@using LucasAguiar.Models
@inject ServicoDAO servicoDAO

<PageTitle>Servi√ßos</PageTitle>

<h1 class="text-xl font-semibold text-gray-800 dark:text-gray-100 mb-6">Lista de Servi√ßos</h1>

<NavLink href="/servico/novo" class="btn btn-sm btn-primary mb-3">Novo Servi√ßo</NavLink>

<table class="table table-striped">
    <thead>
        <tr> 
            <th>#</th>
            <th>Nome</th>
            <th>Pre√ßo</th>
            <th>Dura√ß√£o</th>
            <th>Valor Comiss√£o</th>
        </tr>
    </thead>
    <tbody>
        @if (listaServico != null && listaServico.Any())
        {
            int contador = 1;
            foreach (var servico in listaServico)
            {
                <tr>
                    <td>@contador</td>
                    <td>@servico.NomeServico</td>
                    <td>@servico.PrecoServico.ToString("C")</td>  @* mostra como moeda *@
                    <td>@servico.DuracaoServico min</td>
                    <td>@servico.ComissaoServico.ToString("C")</td>
                </tr>
                contador++;
            }
        }
        else
        {
            <tr>
                <td colspan="5" class="text-center text-muted">Nenhum servi√ßo encontrado.</td>
            </tr>
        }
    </tbody>
</table>
<style>/* Tema Laranja para Listagem de Funcion√°rios */
body {
    background-color: #fffaf3;
    font-family: 'Segoe UI', sans-serif;
    color: #333;
}

h1 {
    font-size: 1.8rem;
    font-weight: bold;
    color: #e67e22;
    margin-bottom: 20px;
    border-bottom: 2px solid #e67e22;
    padding-bottom: 10px;
}

.btn-primary {
    background-color: #e67e22;
    border: none;
    color: white;
    font-weight: bold;
    padding: 8px 16px;
    border-radius: 5px;
    text-decoration: none;
    transition: background-color 0.3s ease;
}

.btn-primary:hover {
    background-color: #d35400;
}

.table {
    width: 100%;
    border-collapse: collapse;
    background-color: #fff;
    box-shadow: 0 0 10px rgba(0,0,0,0.05);
}

.table th {
    background-color: #f39c12;
    color: white;
    padding: 12px;
    text-align: left;
}

.table td {
    padding: 10px;
    border-bottom: 1px solid #f0f0f0;
}

.table-striped tr:nth-child(even) {
    background-color: #fdf2e9;
}

.table-striped tr:hover {
    background-color: #fdebd0;
}

.mb-3 {
    margin-bottom: 1rem;
}</style>
@code {
    private List<Servico> listaServico = new(); // üîπ nome min√∫sculo (padr√£o)

    protected override void OnInitialized()
    {
        CarregarServico();
    }

    private void CarregarServico()
    {
        try
        {
            listaServico = servicoDAO.ListarTodos();
        }
        catch (Exception ex)
        {
            Console.WriteLine("Erro ao carregar servi√ßos: " + ex.Message);
        }
    }
}
